ADLMFlexNetServer
=================
[![Docker Automated build](https://img.shields.io/docker/automated/haysclark/adlmflexnetserver.svg?maxAge=2592000)](https://hub.docker.com/r/haysclark/adlmflexnetserver/builds/) [![Docker Stars](https://img.shields.io/docker/stars/haysclark/adlmflexnetserver.svg?maxAge=2592000)](https://hub.docker.com/r/haysclark/adlmflexnetserver/) [![](https://img.shields.io/docker/pulls/haysclark/adlmflexnetserver.svg)](https://hub.docker.com/r/haysclark/adlmflexnetserver 'DockerHub') [![license](https://img.shields.io/github/license/mashape/apistatus.svg)]()

 > Unofficial Autodesk License Manager FLEXlmÂ® Network Server container.

Usage
-----

To use this container, simply treat it as if you were calling _lmgrd_ directly.  The only caveat is that the container ALWAYS adds the '-z' flag so that _lmgrd_ will run in the Foreground. Otherwise, Docker believes the task is over, and the container will 'stop' immediately.

The container does expect the user to map a local license file to within the __/var/flexlm__ directory.

    docker run -d --mac-address=<license-mac-address> \
    -h <license-hostname> \
    -v <local-license-path>:/var/flexlm/adsk_server.lic:ro \
    -p 2080:2080 -p 27000-27009:27000-27009 \
    haysclark/adlmflexnetserver
    -c /var/flexlm/adsk_server.lic

Alternatively, you can map a local folder containing multiple keys to the __/var/flexlm__ directory.

    docker run -d --mac-address=<license-mac-address> \
    -h <license-hostname> \
    -v <local-license-folder-path>:/var/flexlm \
    -p 2080:2080 -p 27000-27009:27000-27009 \
    haysclark/adlmflexnetserver
    -c /var/flexlm/license_file_1:/var/flexlm/license_file_2

### Logging

Docker's built-in logging functionality will collect the stdout/stderr generated by _lmgrd_. 

    docker logs <container-id>

Thus it's recommended you do NOT use the '-l' flag to log to a file, doing so will cause your Docker logs to be empty.  Additionally, avoid using the '-t' flag when using the 'run' command, enabling TTL support will cause extra line breaks in your Docker logs.

Troubleshooting
---------------

If you are unsure if the server is running correctly, you can log into the container.

    docker exec -it <container-id> /bin/bash

Once in bash run: 

    lmutil lmstat -a -c <license-path>

Image Variants
--------------

### haysclark/adlmflexnetserver:<version>

| Version | Description                                                           |
|---------|-----------------------------------------------------------------------|
| v1.0.0  | Uses NLM 11.13.1.2 (support pre-2020 products)                        |
| v1.0.1  | Uses NLM 11.16.2.0 (required for 2020 products / backwards compatible |

Building Custom Image
---------------------
If a specific version of _nlm_ is needed, you can compile it locally.

### Build Arguments

The following build arguments have been exposed.

| Name      | Description                     |
|-----------|---------------------------------|
| NLM_URL   | url for Network License Manager |
| TEMP_PATH | path for temporary files        |

Usage example:

    docker build --build-arg NLM_URL=<nlm-url> .

Resources
---------
- [Official Docs](https://knowledge.autodesk.com/search-result/caas/downloads/content/autodesk-network-license-manager-for-linux.html)

Supports
--------
Applies to Autodesk Nastran 2015, Autodesk Nastran 2016, Autodesk Nastran 2017, Infrastructure Map Server 2014, Infrastructure Map Server 2015, Infrastructure Map Server 2016, Infrastructure Map Server 2017, Maya 2014, Maya 2015, Maya 2016, Maya 2017, Moldflow Insight 2015, Moldflow Insight 2016, Moldflow Insight 2017, MotionBuilder 2014, MotionBuilder 2015, MotionBuilder 2016, MotionBuilder 2017, Mudbox 2014, Mudbox 2015, Mudbox 2016, Mudbox 2017, Softimage 2014, Softimage 2015, Softimage 2016, VRED Design 2014, VRED Products 2017 and more.